// It contains all the queries I will be practicing .

1. How many users are active ?

Solution :

[
  {
    $match: {
      isActive : true
    }
  },
  {
    $count: 'activeUsers'
  }
  
]

2. What is the average age of all users ?

Solution : (Use $group whenever you need to summarize, calculate, or combine data across multiple documents â€” rather than look at each document individually.)

[
	{
	  $group: {
	    _id: null, // null bcz we want all users
	    average: {
	      $avg: "$age" 
	    }
	  }
	} 
]

3. List the top 5 most common favourite fruits among the users .

Solution : (3 aggregation pipelines used)
    1. To filter the users based on favoriteFruit
    2. Sorting the users based on favoriteFruit
    3. Find the top 'k' based on above pipelines

[
  {
    $group: {
    _id: "$favoriteFruit", // here $favoriteFruit is the group key 
    count:{     // here count is the field , sum is accumulator 
      $sum:1    // increases value by one everytime the favoriteFruit is found
    }
    }
  },
  {
    $sort: {
      count: -1 // -1 for descending order , 1 for ascending
    }
  },
  {
    $limit: 3 // when we want to find top 3 
  }
]

4. Find the total number of males and females. (I have sorted them as well)

Solution : 

[
  {
    $group: {
      _id: "$gender",
      Count: {
        $sum: 1
      }
    }
  },
  {
    $sort: {
      Count: 1
    }
  }
]

5. Which country has the highest number of registered user ?

Solution : Used three aggregation pipelines 
(company is an object then used '.' operator , then sort them , then found the highest)

[
  {
    $group: {
      _id: "$company.location.country",
      count: {
        $sum: 1,
      },
    },
  },
	{
	  $sort: {
	    count: -1 // for highest
	  }
	},
  {
    $limit: 1
  }
]

6. List all the eye colors present in the collection .(then sorted them as well in descending order)

Solution :

[
  {
    $group: {
      _id: "$eyeColor",
      count: {
        $sum: 1,
      },
    },
  },
	{
	  $sort: {
	    count: -1
	  }
	}
]